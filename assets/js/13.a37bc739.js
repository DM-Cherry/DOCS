(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{364:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"git版本管理规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git版本管理规范"}},[t._v("#")]),t._v(" Git版本管理规范")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("参见")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://user-gold-cdn.xitu.io/2019/5/21/16ad91bdb94c4675?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("分支开发工作流"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"分支命名和职责"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支命名和职责"}},[t._v("#")]),t._v(" 分支命名和职责")]),t._v(" "),s("h3",{attrs:{id:"一、长期存在的分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、长期存在的分支"}},[t._v("#")]),t._v(" 一、长期存在的分支")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("master")]),t._v(" 分支")]),t._v(" "),s("p",[s("code",[t._v("master")]),t._v(" 为主分支，也是用于部署生产环境的分支，确保 "),s("code",[t._v("master")]),t._v(" 分支稳定性"),s("br"),t._v(" "),s("code",[t._v("master")]),t._v(" 分支一般由 "),s("code",[t._v("dev")]),t._v(" 以及 "),s("code",[t._v("hotfix")]),t._v(" 分支合并，任何时间都不能直接修改代码")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("dev")]),t._v(" 分支")]),t._v(" "),s("p",[s("code",[t._v("dev")]),t._v(" 为开发分支，始终保持最新完成以及 bug 修复后的代码"),s("br"),t._v("\n一般开发的新功能时，"),s("code",[t._v("feature")]),t._v(" 分支都是基于 "),s("code",[t._v("dev")]),t._v(" 分支下创建的")])])]),t._v(" "),s("h3",{attrs:{id:"二、建议的其它分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、建议的其它分支"}},[t._v("#")]),t._v(" 二、建议的其它分支")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("feature")]),t._v(" 分支")]),t._v(" "),s("p",[t._v("开发新功能时，以 "),s("code",[t._v("dev")]),t._v(" 为基础创建 "),s("code",[t._v("feature")]),t._v(" 分支"),s("br"),t._v("\n分支命名: "),s("code",[t._v("feature/")]),t._v(" 开头的为特性分支， 命名规则: "),s("code",[t._v("feature/user-module")]),t._v("、 "),s("code",[t._v("feature/cart-module")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("hotfix")]),t._v(" 分支")]),t._v(" "),s("p",[t._v("分支命名: "),s("code",[t._v("hotfix/")]),t._v(" 开头的为修复分支，它的命名规则与 "),s("code",[t._v("feature")]),t._v(" 分支类似"),s("br"),t._v("\n线上出现紧急问题时，需要及时修复，以 "),s("code",[t._v("master")]),t._v(" 分支为基线，创建 "),s("code",[t._v("hotfix")]),t._v(" 分支，修复完成后，需要合并到 "),s("code",[t._v("master")]),t._v(" 分支和 "),s("code",[t._v("dev")]),t._v(" 分支")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("release")]),t._v(" 分支")]),t._v(" "),s("p",[s("code",[t._v("release")]),t._v(" 为预上线分支，发布提测阶段，会以 "),s("code",[t._v("release")]),t._v(" 分支代码为基准提测")])])]),t._v(" "),s("blockquote",[s("p",[t._v("当有一组 "),s("code",[t._v("feature")]),t._v(" 开发完成，首先会合并到 "),s("code",[t._v("dev")]),t._v(" 分支，进入提测时，会创建 "),s("code",[t._v("release")]),t._v(" 分支。\n如果测试过程中若存在bug需要修复，则直接由开发者在 "),s("code",[t._v("release")]),t._v(" 分支修复并提交。\n当测试完成之后，合并 "),s("code",[t._v("release")]),t._v(" 分支到 "),s("code",[t._v("master")]),t._v(" 和 "),s("code",[t._v("dev")]),t._v(" 分支，此时 "),s("code",[t._v("master")]),t._v(" 为最新代码，用作上线。")])]),t._v(" "),s("h2",{attrs:{id:"标签-版本管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#标签-版本管理"}},[t._v("#")]),t._v(" 标签，版本管理")]),t._v(" "),s("p",[t._v("采用 "),s("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("semver 语义化版本"),s("OutboundLink")],1),t._v(" 标准")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("版本格式：主版本号.次版本号.修订号")]),t._v(" "),s("ol",[s("li",[t._v("主版本号：当你做了不兼容的 API 修改，")]),t._v(" "),s("li",[t._v("次版本号：当你做了向下兼容的功能性新增，")]),t._v(" "),s("li",[t._v("修订号：当你做了向下兼容的问题修正。")])])])]),t._v(" "),s("p",[t._v("推荐可以使用 "),s("a",{attrs:{href:"https://github.com/conventional-changelog/standard-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("standard-version"),s("OutboundLink")],1),t._v(" 进行版本管理，如本项目在 "),s("code",[t._v("package.json")]),t._v(" 中添加该依赖并且加入了相关的命令(这个可以配合 CI 流程进行)")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"release:major"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard-version -r major -n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主版本更改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"release:minor"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard-version -r minor -n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 次版本更改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"release:patch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard-version -r patch -n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修复版本更改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prerelease:alpha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard-version -p alpha -n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// alpha 版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prerelease:beta"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standard-version -p beta -n"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beta 版本")]),t._v("\n")])])]),s("h2",{attrs:{id:"常见任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见任务"}},[t._v("#")]),t._v(" 常见任务")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("增加新功能")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -b feature/xxx            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从 dev 建立特性分支")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: blabla                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开发")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx\t\t\t\t\t   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文件的时候注意一定不要将不相关的文件都带到远程仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feat: 功能说明'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge feature/xxx --no-ff          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把特性分支合并到 dev")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("修复紧急 bug")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -b hotfix/xxx         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从master建立 hotfix 分支")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hotfix/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: blabla                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开发")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hotfix/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx\t\t\t\t\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文件的时候注意一定不要将不相关的文件都带到远程仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hotfix/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'commit comment'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge hotfix/xxx --no-ff       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把 hotfix 分支合并到 master，并上线到生产环境")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge hotfix/xxx --no-ff          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把 hotfix 分支合并到 dev，同步代码")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("测试|预发布环境")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("release"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge dev --no-ff             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把dev分支合并到release，然后在测试环境拉取并测试")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("生成环境代码")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge release --no-ff          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把release测试好的代码合并到master，运维人员操作")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打 tag 标签：这个根据实际情况来进行 alpha、patch、minor、major 版本发布")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run prerelease:alpha"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("release:patch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("release:minor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("release:major\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://nvie.com/posts/a-successful-git-branching-model/",target:"_blank",rel:"noopener noreferrer"}},[t._v("A successful Git branching model"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/cnblogsfans/p/5075073.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何正确使用Git Flow"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-flow 备忘清单"),s("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=n.exports}}]);